### Домашнее задание 7. Изменение данных

Реализуйте указанные запросы, представления, проверки и триггеры на языке SQL.

1.  Напишите запросы, удаляющие студентов
    1.  Учащихся в группе, заданной идентификатором (_GroupId_).
    2.  Учащихся в группе, заданной названием (_GroupName_).
    3.  Без оценок.
    4.  Имеющих 3 и более оценки.
    5.  Имеющих 3 и менее оценки.
    6.  Студентов, c долгами (здесь и далее — по отсутствию оценки).
    7.  Студентов, имеющих 2 и более долга.
    8.  Студентов, имеющих не более 2 долгов.
2.  Напишите запросы, обновляющие данные студентов
    1.  Изменение имени студента (_StudentId_, _StudentName_).
    2.  Перевод студента из группы в группу по индентификаторам (_StudentId_, _GroupId_, _FromGroupId_).
    3.  Перевод всех студентов из группы в группу по идентификаторам (_GroupId_, _FromGroupId_).
    4.  Перевод студента из группы в группу по названиям (_GroupName_, _FromGroupName_).
    5.  Перевод всех студентов из группы в группу, только если целевая группа существует (_GroupName_, _FromGroupName_).
3.  Напишите запросы, подсчитывающие статистику по студентам
    1.  Число оценок студента (столбец _Students.Marks_) (_StudentId_).
    2.  Число оценок каждого студента (столбец _Students.Marks_).
    3.  Пересчет числа оценок каждого студента по данным из таблицы _NewMarks_ (столбец _Students.Marks_).
    4.  Число сданных дисциплин каждого студента (столбец _Students.Marks_).
    5.  Число долгов студента (столбец _Students.Debts_) (_StudentId_).
    6.  Число долгов каждого студента (столбец _Students.Debts_).
    7.  Число долгов каждого студента группы (столбец _Students.Debts_) (_GroupName_).
    8.  Число оценок и долгов каждого студента (столбцы _Students.Marks_, _Students.Debts_).
4.  Напишите запросы, обновляющие оценки, с учетом данных из таблицы _NewMarks_, имеющей такую же структуру, как таблица _Marks_
    1.  Проставляющий новую оценку только если ранее оценки не было.
    2.  Проставляющий новую оценку только если ранее оценка была.
    3.  Проставляющий максимум из старой и новой оценки только если ранее оценка была.
    4.  Проставляющий максимум из старой и новой оценки (если ранее оценки не было, то новую оценку).
5.  Работа с представлениями
    1.  Создайте представление _StudentMarks_ в котором для каждого студента указано число оценок (_StudentId_, _Marks_).
    2.  Создайте представление _AllMarks_ в котором для каждого студента указано число оценок, включая оценки из таблицы _NewMarks_ (_StudentId_, _Marks_).
    3.  Создайте представление _Debts_ в котором для каждого студента, имеющего долги указано их число (_StudentId_, _Debts_).
    4.  Создайте представление _StudentDebts_ в котором для каждого студента указано число долгов (_StudentId_, _Debts_).
6.  Целостность данных.
    
    Обратите внимание, что задания из этого раздела надо посылать в PCMS, но они будут проверяться только вручную после окончания сдачи. То есть в PCMS вы получите _+_ за любое решение.
    
    В комментарии перед запросом укажите версию использованной СУБД.
    
    1.  Добавьте проверку того, что у студентов есть оценки только по дисциплинам из их плана (_NoExtraMarks_) (_StudentId_, _CourseId_).
    2.  Добавьте проверку того, что все студенты каждой группы имею оценку по одному и тому же набору дисциплин (_SameMarks_). (_StudentId_).
    3.  Создайте триггер _PreserveMarks_, не позволяющий уменьшить оценку студента по дисциплине. При попытке такого изменения оценка изменяться не должна. (_StudentId_).

### Минусы
1.1

1.2

1.3

1.4

1.5

    SQL: Слишком много соединений: 1
    SQL: Слишком много внешних соединений: 1
1.6

1.7

1.8

    SQL: Слишком много соединений: 4
    SQL: Слишком много внешних соединений: 2
    SQL: Слишком много подзапросов: 3
    SQL: Слишком много операций над множествами: 2
2.1

2.2

2.3

2.4

2.5

3.1

3.2

    SQL: Отсутствует where: 1
3.3

    SQL: Отсутствует where: 1
3.4

    SQL: Отсутствует where: 1
3.5

    SQL: Слишком много соединений: 2
3.6

    SQL: Слишком много соединений: 2
    SQL: Отсутствует where: 1
3.7

    SQL: Слишком много соединений: 2
3.8

    SQL: Слишком много соединений: 2
    SQL: Отсутствует where: 1
4.1

    SQL: Слишком много RC-подзапросов: 1
4.2

    SQL: Слишком много RC-подзапросов: 2
    SQL: Слишком много кореллированных подзапросов: 1
    SQL: Слишком много подзапросов: 2
4.3

    SQL: Слишком много кореллированных подзапросов: 1
4.4

    SQL: Слишком много кореллированных подзапросов: 1
5.1

5.2

5.3

5.4

    SQL: Слишком много RC-подзапросов: 1
    SQL: Слишком много соединений: 4
    SQL: Слишком много подзапросов: 4
    SQL: Слишком много операций над множествами: 2
6.1

    Нет решения
6.2

    Нет решения
6.3

    Нет решения
